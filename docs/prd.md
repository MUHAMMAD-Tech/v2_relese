# LETHEX Digital Asset Fund Management System Requirements Document

## 1. Application Overview

### 1.1 Application Name
LETHEX\n
### 1.2 Application Description
LETHEX is a digital asset fund viewer and manual management system designed for fund administrators and holders. The platform provides informational balance tracking, manual transaction approval workflows, and real-time cryptocurrency price monitoring. No blockchain interaction or real money processing is involved - all operations require manual admin approval.\n
### 1.3 Core Positioning
- Informational digital asset portfolio viewer
- Manual approval-based transaction management
- Admin-controlled fund operations
- Real-time price tracking with dual currency display (USDT + KGS)
- Multi-language support (EN/UZ/RU)
- Light/Dark theme switching

## 2. Technical Architecture

### 2.1 Frontend Stack
- React (Vite)\n- Tailwind CSS (mobile-first approach with theme support)
- Zustand (global state management)
- Framer Motion (animations)
- i18n system (JSON-based localization)

### 2.2 Backend Stack
- Node.js + Express\n- SQLite (single-file database)
- REST API architecture
- Token registry system
\n### 2.3 External APIs
- CoinGecko public API\n- Price refresh interval: 1 second
- Backend caching with fail-safe mechanism

## 3. Access Control System

### 3.1 Initial Admin Access
- Default admin access code: Muso2909 (temporary, first-time use only)
- Single unified login input for both admin and holders
- No separate /admin route

### 3.2 Access Code Logic
- Admin access code checked first
- If match → Admin Panel
- If holder code match → Holder Dashboard
- If no match → 'Invalid access code' error

### 3.3 Admin Code Management
- Admin can change access code via Admin Panel → Settings
- Only ONE admin access code exists at any time
- New code stored in database
- Old code becomes invalid immediately upon change

### 3.4 Holder Access Codes
- Auto-generated by admin
- Unique per holder\n- Admin can manually change holder access codes
- Session persists after page refresh
- EXIT button clears session
- Active sessions using old code invalidated immediately upon code change

## 4. Token System

### 4.1 Token Registry (Backend)
- Tokens stored in database table or JSON file
- On server startup:\n  - If tokens table is empty → auto-insert DEFAULT Top-50 native coins
- Token source priority:
  1. CoinGecko API (top by market cap)
  2. Cached data
  3. Hardcoded fallback Top-50 list\n- Each token record contains:
  - symbol
  - name
  - icon URL
  - market cap rank\n  - enabled = true
- API endpoint: GET /api/tokens
- API MUST NEVER return empty array
- If API fails → use cache or fallback
\n### 4.2 Allowed Tokens (Top 50 Native Coins Only)
1. BTC – Bitcoin\n2. ETH – Ethereum
3. USDT – Tether
4. BNB – Binance Coin
5. SOL – Solana
6. USDC – USD Coin
7. XRP – XRP
8. TON – Toncoin
9. ADA – Cardano
10. DOGE – Dogecoin\n11. AVAX – Avalanche
12. TRX – TRON
13. DOT – Polkadot
14. MATIC – Polygon
15. LINK – Chainlink
16. ICP – Internet Computer
17. NEAR – NEAR Protocol
18. LTC – Litecoin
19. BCH – Bitcoin Cash
20. ATOM – Cosmos
21. XLM – Stellar\n22. UNI – Uniswap
23. ETC – Ethereum Classic
24. XMR – Monero
25. OKB – OKB
26. APT – Aptos
27. HBAR – Hedera
28. FIL – Filecoin
29. ARB – Arbitrum\n30. VET – VeChain
31. QNT – Quant
32. MKR – Maker\n33. CRO – Cronos
34. ALGO – Algorand
35. AAVE – Aave\n36. GRT – The Graph
37. EOS – EOS
38. FTM – Fantom
39. THETA – Theta
40. XTZ – Tezos
41. IMX – Immutable
42. INJ – Injective
43. OP – Optimism\n44. RNDR – Render
45. KAVA – Kava
46. ZEC – Zcash
47. MINA – Mina
48. DASH – Dash
49. IOTA – IOTA\n50. CAKE – PancakeSwap

### 4.3 Token Restrictions
- NO wrapped tokens
- NO staked tokens
- NO LP tokens\n- NO synthetic or derivative tokens
- Whitelist enforced at backend level
- Non-whitelisted tokens: not rendered, not selectable, not assignable

### 4.4 Token Selector UI
- Fetch tokens ONLY from backend (/api/tokens)
- Store tokens in global state
- Modal-based selection interface
- Fixed header: 'Select Asset'
- Sticky search input at top
- Scrollable list (max-height: 80vh)
- Visible Close (X) button
- Each token row displays:
  - Token logo (left)
  - Symbol (bold)
  - Full name (muted text)
  - Live price (right-aligned)
- Clear hover and selected states
- Smooth scrolling on Android and desktop
- Solid backgrounds (no transparency)
- Tokens MUST appear on first open
- 'No tokens found' ONLY if search filter returns zero results\n- Native coins selectable on mobile & desktop

## 5. Internationalization (i18n)

### 5.1 Supported Languages
- English (EN) — default
- Uzbek (UZ)
- Russian (RU)

### 5.2 Implementation
- JSON-based i18n system
- Localization files:\n  - /locales/en.json
  - /locales/uz.json
  - /locales/ru.json
- No hardcoded text in components
- Language applies to entire app
\n### 5.3 Language Switcher UI
- Dropdown selector (EN / UZ / RU)
- Visible in header
- On mobile → inside menu/drawer
- Touch-friendly\n\n### 5.4 Persistence
- Save selected language in localStorage
- Refresh MUST NOT reset language
- Language persists across sessions

## 6. Theme System

### 6.1 Available Themes
- Dark (default)
- Light
\n### 6.2 Implementation
- Tailwind class-based theming
- Apply theme class on <html> or <body>
- Entire app switches theme
- No mixed colors
- Smooth transition animations

### 6.3 Theme Toggle UI
- Toggle button with Sun/Moon icon
- Visible in header
- Mobile friendly\n- Clear visual feedback

### 6.4 Persistence
- Save theme choice in localStorage
- Refresh MUST NOT reset theme
- Theme persists across sessions

## 7. Admin Panel Features

### 7.1 Settings
- Change admin access code
- System configuration
\n### 7.2 Holder Management
- Add new holders
- Edit holder information
- Delete holders
- Auto-generate unique holder access codes
- **Change holder access codes:**
  - Button: 'Change Access Code'
  - Generate new random code OR manual input\n  - Save to backend database
  - Old code becomes INVALID immediately
  - No duplicate access codes allowed
  - Active sessions using old code invalidated

### 7.3 Asset Management
- Assign assets to holders (Top-50 tokens only)
- Edit asset amounts
- View holder portfolios
\n### 7.4 Transaction Approval
- Approve/reject swap requests
- Approve buy requests
- Handle sell requests manually
- Enter execution prices for swaps

### 7.5 History & Reporting
- View complete transaction history
- View commission summary:\n  - Total fees in USDT and KGS
  - Per-holder breakdown
  - Date and time stamps

## 8. Holder Dashboard Features

### 8.1 Portfolio View
- View assigned assets
- Live prices in USDT and KGS\n- Real-time balance updates
\n### 8.2 Transaction Requests
- Submit swap requests
- Submit buy requests
- Submit sell requests
\n### 8.3 History\n- View personal transaction history
- Click for detailed transaction information

## 9. Swap System

### 9.1 Swap Rules
- Only owned assets can be swapped
- Swap fee: 1% of transaction amount
- Amount validation:
  - Requested amount must not exceed holder balance
  - Insufficient balance blocks transaction
\n### 9.2 Swap Calculation
- Fee = amount × 0.01\n- Net = amount - Fee
- Received = Net ÷ executionPrice
\n### 9.3 Swap UI
- Clean numeric amount input field
- Quick percentage buttons: 25% / 50% / 75% / 100%
- Live preview display:\n  - Transaction fee
  - Net amount after fee
  - Estimated tokens received
\n### 9.4 Swap Approval Flow
- Holder submits swap request
- Admin enters execution price manually
- Admin approves swap
- Balances update atomically
\n## 10. Buy System

### 10.1 Buy Flow
- Holder submits buy request
- Admin reviews request
- Admin approves and adds asset to holder portfolio
\n## 11. Sell System

### 11.1 Sell Flow
- Holder submits sell request
- System displays message: 'Please contact admin via Telegram'
- Admin adjusts balances manually after off-platform confirmation

## 12. Commission System

### 12.1 Fee Collection
- 1% fee collected on each swap transaction
- Fees stored per transaction in database

### 12.2 Commission Reporting
- Total fees displayed in USDT and KGS
- Per-holder fee breakdown
- Transaction date and time tracking

## 13. Transaction History

### 13.1 History Entry Fields
- Holder name
- Action type (Swap / Buy / Sell)
- From asset → To asset
- Amount
- Fee
- Net amount\n- Execution price
- Status
- Requested timestamp
- Approved timestamp

### 13.2 History UI
- Click entry to open detail modal
- No overlapping text
- Mobile-friendly card layout
- Desktop table layout

## 14. Responsive Design Requirements

### 14.1 Mobile Layout
- Single-column layout
- Sidebar converts to hamburger drawer
- Tables convert to card format
- Full-width buttons (minimum 44px height)
- No content overlap or hidden elements
- Touch-friendly buttons (≥44px)
- Asset selector scrolls smoothly
\n### 14.2 Desktop Layout
- Visible sidebar navigation
- Grid/table layouts allowed
- Centered modals
- Optimized spacing
\n## 15. UI/UX Design Guidelines

### 15.1 Design Style
- Premium dark fintech aesthetic (Dark theme)
- Deep charcoal backgrounds (#0f1419, #1a1f26)
- Accent colors: electric blue (#00d4ff) for primary actions, amber (#fbbf24) for warnings
- Light theme: clean white/light gray backgrounds with adjusted accent colors
- Subtle card elevation with soft shadows
- Clean sans-serif typography (Inter or similar)
- Smooth micro-interactions and transitions
- Smooth theme transition animations

### 15.2 Interaction Standards
- No browser alert() dialogs
- Custom modal components for all confirmations
- Proper empty states with helpful messaging
- Loading states with skeleton screens
- Smooth Framer Motion animations
- Clear visual hierarchy
- No 'No tokens found' on first load

### 15.3 Data Display
- No fake $0.00 prices
- Real-time price updates
- Proper number formatting\n- Clear currency indicators (USDT/KGS)
\n## 16. Development Standards

### 16.1 Code Quality
- Brand-new codebase from scratch
- No legacy code reuse
- No carryover bugs
- Clean, consistent code structure
- Production-ready implementation

### 16.2 Testing Requirements
- Responsive testing on mobile and desktop
- Token whitelist enforcement testing
- Access control validation
- Transaction flow testing
- Price update reliability testing
- Language switching testing
- Theme switching testing
- Holder access code change testing
- Token loading reliability testing

### 16.3 Persistence Testing
- Language persists after refresh
- Theme persists after refresh
- All settings persist across sessions
\n## 17. Final Requirements Summary

### 17.1 Core Features
- Top-50 native coins always visible
- Language switching works everywhere (EN/UZ/RU)\n- Light/Dark theme works everywhere
- Admin can safely change holder access codes
- All settings persist after refresh
- Clean, stable, professional UX

### 17.2 Quality Standards
- Works on mobile & desktop
- No overlapping elements
- Asset selector scrolls smoothly
- Touch-friendly buttons (≥44px)
- No 'No tokens found' on first load
- Production-ready stability